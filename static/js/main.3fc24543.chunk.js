(this.webpackJsonpskypey=this.webpackJsonpskypey||[]).push([[0],{1089:function(e,t,a){},1090:function(e,t,a){},1091:function(e,t,a){},1092:function(e,t,a){},1093:function(e,t,a){},1094:function(e,t,a){},1095:function(e,t,a){},1096:function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),c=a(11),i=a.n(c),o=(a(22),a(23),a(24),a(5)),u=a(1),l=a(25),m=a(34),d=a(40),E=a(2),p=(n=10,Array.from({length:n},(function(){return g()}))),v=E.mapKeys(p,"user_id"),f=function(e){var t={};return E.forEach(p,(function(a){var n;t[a.user_id]=Object(u.a)({},E.mapKeys((n=e,Array.from({length:n},(function(e,t){return{number:t,text:m.sentence(),is_user_msg:d.random.boolean(),is_edited:!1}}))),"number"))})),t};g(),f(10);function g(){return{name:d.name.findName(),email:d.internet.email(),profile_pic:d.internet.avatar(),status:m.sentence(),user_id:l.generate()}}var _=a(3),h=a(2),S=a.n(h);var y=Object(o.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return e},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return e},activeUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_USER_ID":return t.payload;default:return e}},typing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TYPING_VALUE":return t.payload;case"SEND_MESSAGE":case"SUBMIT_EDITED_MESSAGE":case"SET_ACTIVE_USER_ID":return"";default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(10),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":var a=t.payload,n=a.message,s=a.userId,r=e[s],c=+S.a.keys(r).pop()+1;return console.log(n,s,t),Object(u.a)(Object(u.a)({},e),{},Object(_.a)({},s,Object(u.a)(Object(u.a)({},r),{},Object(_.a)({},c,{number:c,text:n,is_user_msg:!0,is_edited:!1}))));case"SUBMIT_EDITED_MESSAGE":var i=t.payload,o=i.userId,l=i.messageId,m=i.message,d=e[o];return Object(u.a)(Object(u.a)({},e),{},Object(_.a)({},o,Object(u.a)(Object(u.a)({},d),{},Object(_.a)({},l,{number:l,text:m,is_user_msg:!0,is_edited:!0}))));default:return e}},editMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isEditing:!1,messageId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_MESSAGE":var a=t.payload.messageId;return Object(u.a)(Object(u.a)({},e),{},{isEditing:!0,messageId:a});case"SEND_MESSAGE":case"SET_ACTIVE_USER_ID":return Object(u.a)(Object(u.a)({},e),{},{isEditing:!1,messageId:null});default:return e}}}),b=Object(o.b)(y),I=function(e){return{type:"SET_TYPING_VALUE",payload:e}};function N(e){var t=e.user_id;console.log(t),b.dispatch({type:"SET_ACTIVE_USER_ID",payload:t})}var T=function(e){var t=e.user,a=t.name,n=t.profile_pic,s=t.status;return r.a.createElement("div",{className:"User",onClick:N.bind(null,t)},r.a.createElement("img",{src:n,alt:a,className:"User__pic"}),r.a.createElement("div",{className:"User__details"},r.a.createElement("p",{className:"User__details-name"},a),r.a.createElement("p",{className:"User__details-status"},s)))},U=function(e){var t=e.contacts;return r.a.createElement("aside",{className:"Sidebar"},t.map((function(e){return r.a.createElement(T,{user:e,key:e.user_id})})))},j=(a(1089),a(1090),function(e){var t=e.user,a=t.name,n=t.profile_pic,s=t.status,c=a.split(" ")[0];return r.a.createElement("div",{className:"Empty"},r.a.createElement("h1",{className:"Empty__name"},"Welcome, ",c," "),r.a.createElement("img",{src:n,alt:a,className:"Empty__img"}),r.a.createElement("p",{className:"Empty__status"},r.a.createElement("b",null,"Status:")," ",s),r.a.createElement("button",{className:"Empty__btn"},"Start a conversation"),r.a.createElement("p",{className:"Empty__info"},"Search for someone to start chatting with or go to Contacts to see who is available"))});a(1091);var O=function(e){var t=e.user,a=t.name,n=t.status;return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",{className:"Header__name"},a),r.a.createElement("p",{className:"Header__status"},n))},D=a(13),w=a(14),A=a(16),M=a(15),k=(a(1092),function(e){var t=e.message,a=t.text,n=t.is_user_msg,s=t.is_edited,c=t.number;return r.a.createElement("span",{onClick:n?function(){return function(e,t){var a=b.getState().activeUserId;b.dispatch(I(e)),b.dispatch(function(e,t){return{type:"EDIT_MESSAGE",payload:{userId:t,messageId:e}}}(t,a))}(a,c)}:null,className:"Chat ".concat(n?"is-user-msg":"")},a,s?" (edited)":"")});var C=function(e){Object(A.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).scrollToBottom=function(){n.chatsRef.current.scrollTop=n.chatsRef.current.scrollHeight},n.chatsRef=r.a.createRef(),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Chats",ref:this.chatsRef},this.props.messages.map((function(e){return r.a.createElement(k,{message:e,key:e.number})})))}}]),a}(s.Component),G=(a(1093),a(1094),function(e){e.preventDefault();var t=b.getState(),a=t.typing,n=t.activeUserId,s=t.editMessage;s.isEditing?b.dispatch(function(e,t,a){return{type:"SUBMIT_EDITED_MESSAGE",payload:{userId:e,messageId:t,message:a}}}(n,s.messageId,a)):(console.log(a,n,"new message from user"),b.dispatch({type:"SEND_MESSAGE",payload:{message:a,userId:n}}))}),R=function(e){var t=e.value;return r.a.createElement("form",{className:"Message",onSubmit:G},r.a.createElement("input",{className:"Message__input",onChange:function(e){b.dispatch(I(e.target.value))},value:t,placeholder:"write a message"}))},B=function(e){var t=e.activeUserId,a=b.getState(),n=a.contacts[t],s=a.messages[t],c=a.typing;return r.a.createElement("div",{className:"ChatWindow"},r.a.createElement(O,{user:n}),r.a.createElement(C,{messages:S.a.values(s)}),r.a.createElement(R,{value:c}))},V=function(e){var t=e.user,a=e.activeUserId;return r.a.createElement("main",{className:"Main"},a?r.a.createElement(B,{activeUserId:a}):r.a.createElement(j,{user:t,activeUserId:a}))},x=(a(1095),function(){var e=b.getState(),t=e.contacts,a=e.user,n=e.activeUserId;return r.a.createElement("div",{className:"App"},r.a.createElement(U,{contacts:S.a.values(t)}),r.a.createElement(V,{user:a,activeUserId:n}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=function(){console.log("%c Rendered with ? ??","background: purple; color: #FFF"),console.log(b.getState()),i.a.render(r.a.createElement(x,null),document.getElementById("root"))};H(),b.subscribe(H),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},17:function(e,t,a){e.exports=a(1096)},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){}},[[17,1,2]]]);
//# sourceMappingURL=main.3fc24543.chunk.js.map